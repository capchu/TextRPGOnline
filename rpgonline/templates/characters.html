{% extends "base.html" %}
{% block body %}
    <div class="row">
        <div class="span12">
            <h1>Characters page</h1>
            <script type="text/javascript">
                $(document).ready(function() {
                        $.getJSON( '/character_list_json', { name: "{{ session['username'] }}" }, function( data ) {
                            var table_obj = $('#table');
                            $.each(data, function(index, field) {
                                $('#title').text('Characters for ' + field.user_id)
                                
                                var table_row = $('<tr>', {id: field.user_id});
                                var table_c_name = $('<td>', {html: field.name});
                                var table_c_combatnotes = $('<td>', {html: field.combat_notes});
                                var table_c_defense = $('<td>', {html: field.defense});
                                var table_c_health= $('<td>', {html: field.health});
                                var table_c_endurance = $('<td>', {html: field.endurance});
                                var table_c_tv = $('<td>', {html: field.tv});
                                var table_c_background = $('<td>', {html: field.background});
                                var table_c_appearance = $('<td>', {html: field.appearance});
                                var table_c_personality = $('<td>', {html: field.personality});
                                var table_c_other_notes = $('<td>', {html: field.other_notes});
                                var table_c_portrait_url = $('<td>', {html: field.portrait_url});
                                var table_c_icon_url = $('<td>', {html: field.icon_url});
                                var table_c_edit_link = $('<td><a href="/character_edit?name=' + field.char_id + '">edit</a>');
				var table_c_delete_char = $('<td><a href="/character_delete?id=' + field.char_id + '">delete</a>');
                                
                                table_row.append(table_c_name);
                                table_row.append(table_c_combatnotes);
                                table_row.append(table_c_defense);
                                table_row.append(table_c_health);
                                table_row.append(table_c_endurance);
                                table_row.append(table_c_tv);
                                table_row.append(table_c_background);
                                table_row.append(table_c_appearance);
                                table_row.append(table_c_personality);
                                table_row.append(table_c_other_notes);
                                table_row.append(table_c_portrait_url);
                                table_row.append(table_c_icon_url);
                                table_row.append(table_c_edit_link);
				table_row.append(table_c_delete_char);
                                table_obj.append(table_row);
                            });
                            //console.log(JSON.stringify(data));
                        });
                });
            </script>
            
            <br>
            
            <div id="characters">
                <style>
                    table, th, td {
                        
                    }
                    th, td {
                        padding:5px;
                    }
                </style>
                <table id="table" border="3" style="width:600px">
                    <tr>
                        <th colspan="14">
                            <h3 id="title"></h3>
                        </th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th>Combat Notes</th>
                        <th>Defense</th>
                        <th>Health</th>
                        <th>Endurance</th>
                        <th>TV</th>
                        <th>Background</th>
                        <th>Appearance</th>
                        <th>Personality</th>
                        <th>Other Notes</th>
                        <th>Portrait URL</th>
                        <th>Icon URL</th>
                        <th>Edit</th>
                    </tr>
                </table>
            </div>
            
            <br>
                
        </div>
    </div>
{% endblock %}
